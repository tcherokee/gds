---


import Link from "../helpers/link.astro"
import TestimonyCard from "../general/provideTestimonyCard.astro"
import type { ProviderData } from "../../../interfaces/common/types"

const { data } = Astro.props


---
<script define:vars={{data}}>
	console.log("Testimony Block",data)
</script>
<div class="my-28">
	<div class="flex flex-col md:flex-row gap-6 md:gap-0 justify-between mb-10 items-center">
		<div class="text-3xl font-bold">{data?.title}</div>
		<div>
			<span class="btn-misc px-4 py-1.5 capitalize text-sm font-extrabold">VIEW ALL OUR PROVIDERS</span>
		</div>
	</div>
	<!-- <div class="slider w-full">
		<div class="slides gap-8 py-5">
			{
				data?.homeTestimonies.map((testimony: ProviderData, index:number) =>  ( 
					<div class={"slide-" + (index+1) }>
						<TestimonyCard testimony={testimony} count={index + 1} /> 
					</div>
				))
			}
		</div>
	</div> -->
	<!-- <div class="testimony-container grid grid-cols-1 md:grid-cols-3 w-full gap-8">
		
		{
			data?.homeTestimonies.map((testimony: ProviderData, index:number) => (
				<TestimonyCard testimony={testimony} count={index + 1} />
			))
		}

	</div> -->

	<!-- Flickity HTML init -->
	<div class="gap-8 py-5 gallery js-flickity" data-flickity-options='{ "wrapAround": true}'>
		{
			data?.homeTestimonies.map((testimony: ProviderData, index:number) =>  ( 
				<div class="gallery-cell">
					<TestimonyCard testimony={testimony} count={index + 1} /> 
				</div>
			))
		}
	</div>
</div>


<style>
	.gallery-cell {
		@apply mr-[10px] md:mr-[32px] p-8 bg-white shadow-[0_0_12px_0_rgba(63,230,252,0.60)] rounded-xl w-full md:w-1/3;
		max-width: 415px;
		counter-increment: gallery-cell;
		/* margin-right: 32px; */
	}

	:global(.flickity-page-dots) {
		text-align: left !important;
		width: fit-content
	}

	:global(.flickity-prev-next-button) {
		top: 105%;
		border: solid 1px;
	}

	:global(.flickity-prev-next-button.previous) {
		@apply md:left-[90%] left-[70%]
		/* left: 90%; */
	}

    .slider {
		text-align: center;
		overflow: hidden;
    }

	.slides {
		display: flex;
		overflow-x: auto;
		scroll-snap-type: x mandatory;		
		scroll-behavior: smooth;
		-webkit-overflow-scrolling: touch;
		scroll-snap-points-x: repeat(300px);
		scroll-snap-type: mandatory;
		
	}

    .slides::-webkit-scrollbar {
		width: 10px;
		height: 10px;
    }

    .slides::-webkit-scrollbar-thumb {
		background: black;
		border-radius: 10px;
    }

    .slides::-webkit-scrollbar-track {
    	background: transparent;
    }

    .slides > div {
		@apply p-8 bg-white shadow-[0_0_12px_0_rgba(63,230,252,0.60)] rounded-xl;
		scroll-snap-align: start;
		flex-shrink: 0;
		max-width: 415px;
		transform-origin: center center;
		transform: scale(1);
		transition: transform 0.5s;
		position: relative;
		display: flex;
		justify-content: center;
		align-items: center;
		font-size: 100px;
    }

    .slides > div:target {
    	/*   transform: scale(0.8); */
    }

    .slider > a {
		display: inline-flex;
		width: 1.5rem;
		height: 1.5rem;
		background: white;
		text-decoration: none;
		align-items: center;
		justify-content: center;
		border-radius: 50%;
		margin: 0 0 0.5rem 0;
		position: relative;
    }

    .slider > a:active {
    	top: 1px;
    }

    .slider > a:focus {
    	background: #000;
    }

    /* Don't need button navigation */
    @supports (scroll-snap-type) {
		.slider > a {
			display: none;
		}
    }
</style>