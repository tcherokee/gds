---
// Types
import type { CasinoListData } from "../../../interfaces/common/types";

// Components
import CasinoTable from "../casino/casinoTable.astro";
import Link from "../helpers/link.astro";

const { data, isCustom = false, isTop = false, translationStore } = Astro.props;

const createCustomCasinos = (casinos: CasinoListData[]) => {
  return casinos
    .map((item) => item.casino.data)
    .filter((casino) => casino !== null); // filter out null values
};

const customCasinos = isCustom && createCustomCasinos(data?.casinosList);
---

<script define:vars={{ data }}>
  console.log("casino", data);
</script>
{
  !isTop ? (
    <CasinoTable
      casinos={isCustom ? customCasinos : data.casinos.data}
      {translationStore}
    />
  ) : (
    <div>
      <div class="relative xl:container px-2 pb-5 z-20">
        {data.casinoTableTitle && (
          <div class="mb-[30px]">
            <h2 class="game-list-title">{data.casinoTableTitle}</h2>
          </div>
        )}
        <div class="mb-5 pt-2.5">
          <div class="">
            <CasinoTable
              casinos={isCustom ? customCasinos : data.casinos.data}
              {translationStore}
            />
          </div>
        </div>
        {data?.link && (
          <div class="flex justify-center">
            <Link href={data?.link?.url}>
              <button class="btn self-center mt-5 btn-secondary min-w-[300px] md:min-w-[500px]">
                {data?.link?.label}
              </button>
            </Link>
          </div>
        )}
      </div>
    </div>
  )
}

<style>
  .game-list-title {
    text-shadow: 0px 0px 12px rgba(63, 230, 252, 0.6);
  }
</style>
